## 1.Создать таблицу с текстовым полем и заполнить случайными или сгенерированными данным в размере 1 млн строк
### CREATE TABLE test(word text)

### INSERT INTO test (word)
### SELECT md5(random()::text) FROM generate_series(1, 1000000);

## 2. Посмотреть размер файла с таблицей
### 65 MB

## 3. 5 раз обновить все строчки и добавить к каждой строчке любой символ
### Сделал 5 раз - UPDATE test SET word = word || 'i';

## 4. Посмотреть количество мертвых строчек в таблице и когда последний раз приходил автовакуум
### Живых строк - 1006038, мёртвых = 0;
### Последний автовакуум прошёл за 7 минут до написания этих строчек (2024-10-29 23:01:22)

## 5. Подождать некоторое время, проверяя, пришел ли автовакуум
### Прошёл, написал в предыдущем сообщении

## 6. 5 раз обновить все строчки и добавить к каждой строчке любой символ
### Сделал 5 раз - UPDATE test SET word = word || 'i';

## 7. Посмотреть размер файла с таблицей
### 414 MB

## 8. Отключить Автовакуум на конкретной таблице
### ALTER TABLE test SET (autovacuum_enabled = off);

## 9. 10 раз обновить все строчки и добавить к каждой строчке любой символ
### Сделал 10 раз - UPDATE test SET word = word || 'i';

## 10. Посмотреть размер файла с таблицей
### 841 MB

## 11. Объясните полученный результат
### Из-за отключения функции автовакуума мёртвые записи не удаляются и лежат в памяти таблицы, занимая место.
### Если включить автовакуум, то через некоторое время мёртвые строки удалятся, но размер таблицы может не уменьшится,
### так как освободившееся место будет оставлено для новых строк. Чтобы уменьшить размер файла нужно воспользоваться командой
### "vacuum full test;". После применения этой команды размер таблицы test уменьшился до 89 MB.

## 12. Не забудьте включить автовакуум)
### ALTER TABLE test SET (autovacuum_enabled = on);
